
---

# 🐎 UmaKey

**우마무스메 프리티 더비 키보드 제어 프로젝트**

---

## 📌 프로젝트 소개

**UmaKey**는 **`우마무스메 프리티 더비`를 PC에서 키보드로 보다 편하게 즐기기 위한 도구**입니다.  
PC 환경에서 마우스 조작이 번거롭거나 반복 작업이 많은 유저들을 위해, 키보드 중심의 플레이 환경을 제공합니다.

---

## 🛠️ 주요 기능

| 기능 | 설명 |
|------|------|
| 🎮 **키보드 매핑** | 키 입력을 게임 내 좌표 클릭, 색상 클릭, 키 전달로 연결 |
| 🔁 **매크로 지원** | 반복 동작이나 복잡한 입력을 매크로로 저장하여 키 하나로 실행 |
| 🎨 **색상 매핑** | UI 색상(RGB)을 기반으로 버튼을 자동 인식 및 클릭 |
| 🖱️ **마우스 제어** | 특정 좌표 클릭 및 드래그 지원 |
| 🗂️ **키 프리셋 전환** | 다양한 입력 환경에 맞춰 키 세트를 교체 가능 |

---

## 🎮 기본 키 설정

| 키 | 기능 설명 |
|----|------------|
| `Space` | 초록 버튼 (확인) 클릭 |
| `` ` `` | 흰 버튼 (취소) 클릭 |
| `Q` | 휴식 |
| `W` | 트레이닝 |
| `E` | 스킬 |
| `R` | 외출 |
| `F` | 양호실 |
| `T` | 해외 적성 |
| `G` | 레이스 |
| `A/S/D` | 선택지 1/2/3번 |
| `TAB` | 훈련 돌아보기 1 (좌우 드래그) |
| `NUMPAD_0` | 훈련 돌아보기 2 (매크로 실행) |
| `/` | 스킵 |
| `CAPS_LOCK` | 제자리 클릭 |
| `F1` | 프리셋 전환 |

---

## ⚙️ config.json 상세 설명

### 🔑 전체 구조

```json
{
  "key_mapping": {
    "Q": "[124, 203, 42]",
    "W": "[41, 122, 207]",
    "/": "(730, 1320)",
    "TAB": "drag (20, 1230) (788, 1230)",
    "NUMPAD_0": "MAC"
  },
  "MAC": "1, sleep 0.1, 2, sleep 0.1, 3, sleep 0.1, 4, sleep 0.1, 5"
}
```

### 🔄 매핑 종류 및 형식

| 종류 | 예시 | 설명 |
|------|------|------|
| **색상 기반** | `"[R, G, B]"` | 해당 색상이 감지된 위치 클릭 |
| **좌표 기반** | `"(x, y)"` | 지정된 화면 좌표 클릭 |
| **다른 키 입력** | `"ESC"` | 키 입력 전달 |
| **매크로 호출** | `"MAC"` | 정의된 매크로 실행 |
| **드래그** | `"drag (x1, y1) (x2, y2)"` | 마우스 드래그 동작 |

---

## 🔁 매크로 작성법

매크로는 `key_mapping` 외부에 작성하며, 각 명령은 **쉼표로 구분**됩니다.  
**사용 가능한 명령어는 다음과 같습니다.**

| 명령어 | 설명 |
|--------|------|
| `[R, G, B]` | 해당 색상을 찾아 클릭 |
| `(x, y)` | 해당 좌표 클릭 |
| `KEY` | 해당 키 입력 |
| `sleep n` | n초 동안 대기 |
| `다른 매크로명` | 다른 매크로 호출 (중첩 가능) |

### ⛓️ 예시

```json
"MAC": "[0, 255, 0], (500, 500), ESC, sleep 0.5, MAC"
```

- 초록색 버튼 클릭
- (500, 500) 좌표 클릭
- ESC 키 입력
- 0.5초 대기
- 자기 자신(MAC) 반복 호출

> ⚠️ **무한 루프 형태는 시스템 리소스에 부담을 줄 수 있으므로 주의해서 사용하십시오.**

---

## 🧭 사용 방법

### 1. 프로그램 실행

- 실행 시 트레이 아이콘이 생성됩니다.
- 트레이 메뉴를 통해 **매핑 On/Off, 게임 정보 확인, 종료** 기능 사용 가능

### 2. 키 매핑 활성화

- `config.json`에 키 매핑 및 매크로를 등록하면 자동 적용됩니다.
- 키 프리셋은 여러 세트를 저장할 수 있으며, 전환 키를 통해 손쉽게 변경할 수 있습니다.

### 3. 화면 정보 확인

- 게임 화면의 좌표 및 색상 정보는 프로그램 내부의 `화면 정보 기능`을 통해 쉽게 확인할 수 있습니다.

---

## 🖥️ 화면 설정 & 해상도

- `좌표 기반 매핑`은 게임 화면 해상도와 위치에 의존합니다.
- 해상도를 변경하거나 클라이언트 창 크기를 수정한 경우, 반드시 `config.json` 내 좌표 정보를 갱신해야 합니다.
- 창 이름을 수정한 경우, `window_title` 값도 함께 수정하십시오.

---

## ⚠️ 주의 사항

- **반드시 관리자 권한으로 실행하십시오.**  
  일반 권한으로 실행 시 키 입력 후킹이 제한되어 정상 작동하지 않습니다.

- 색상 기반 매핑은 화면 상황에 따라 **예상치 못한 결과**를 유발할 수 있습니다.  
  상황별 UI 색상을 정확히 파악한 뒤 설정하세요.

- `과도한 매핑, 반복 입력`은 PC 성능 저하를 유발할 수 있습니다.

---

## 📦 설치 방법

### 패키지 설치

```bash
pip install -r requirements.txt
```

---

## 📁 예제 config.json 템플릿

```json
{
  "key_mapping": {
    "Q": "[124, 203, 42]",
    "W": "[41, 122, 207]",
    "E": "(600, 1100)",
    "TAB": "drag (20, 1230) (788, 1230)",
    "NUMPAD_0": "MAC1",
    "CAPS_LOCK": "(-1, -1)"
  },
  "MAC1": "[0, 255, 0], sleep 0.3, /, sleep 0.3, E"
}
```

---

## 🔓 라이선스 및 사용 범위

- 본 프로젝트는 **비상업적 개인 사용자**를 위한 도구입니다.
- 모든 사용자들은 **프로그램 사용에 따른 책임은 사용자 본인에게 있습니다.**
- 상업적 사용, 재배포, 크롤링, 자동 플레이에 악용될 경우 책임지지 않습니다.

---

## 💬 문의 및 피드백

- 사용 중 문제가 발생했거나 개선 제안이 있을 경우, 이슈로 남겨주세요.
- 기능 확장 제안도 적극적으로 검토합니다.

---

